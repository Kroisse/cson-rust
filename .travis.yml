before_install:
#  - yes | sudo add-apt-repository ppa:hansjorg/rust
#  - sudo apt-get update
#  - sudo apt-get install rust-nightly
  - curl -O http://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - curl -O http://static.rust-lang.org/cargo-dist/cargo-nightly-linux.tar.gz
  - tar xfz rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - tar xfz cargo-nightly-linux.tar.gz
  - (cd rust-nightly-x86_64-unknown-linux-gnu/ && sudo ./install.sh)
  - (cd cargo-nightly/ && sudo ./install.sh)
script:
  - cargo build
  - cargo test
  - rustdoc src/lib.rs
branches:
  only:
    - master
