env:
  global:
    - secure: KwAiv3GBW+ROG4qXu3cL4LiSZCRHmBFzky+xcxIcWif86HtWkm7YMxiRVZ6Fe1Cn4fKI3Oh1b/u8tXh+4ljLUG8QL9rt4+9yOiKeP7lidK4scM3w8RndJTmmOMMK0w1OAN8sProPFUWdrulNG8DgoFRRHo7b2SDPHRgJWQMHQwg=
before_install:
#  - yes | sudo add-apt-repository ppa:hansjorg/rust
#  - sudo apt-get update
#  - sudo apt-get install rust-nightly
  - curl -O http://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - curl -O http://static.rust-lang.org/cargo-dist/cargo-nightly-x86_64-unknown-linux-gnu.tar.gz
  - tar xfz rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - tar xfz cargo-nightly-x86_64-unknown-linux-gnu.tar.gz
  - (cd rust-nightly-x86_64-unknown-linux-gnu/ && sudo ./install.sh)
  - (cd cargo-nightly-x86_64-unknown-linux-gnu/ && sudo ./install.sh)
script:
  - cargo build
  - cargo test
  - cargo doc
branches:
  only:
    - master
after_script:
  - cd target && curl http://www.rust-ci.org/artifacts/put?t=$RUSTCI_TOKEN | sh
